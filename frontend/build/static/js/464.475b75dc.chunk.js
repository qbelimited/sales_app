"use strict";(self.webpackChunkSales_tracking_app=self.webpackChunkSales_tracking_app||[]).push([[464],{3464:(e,n,t)=>{t.r(n),t.d(n,{default:()=>d});var a=t(5043),r=t(7417),s=t(4282),i=t(2725),l=t(3814),o=t(9621),c=t(579);const d=e=>{let{showToast:n}=e;const[t,d]=(0,a.useState)(null),[y,h]=(0,a.useState)(!0),[p,u]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[j,A]=(0,a.useState)(""),f=(0,a.useCallback)((async()=>{h(!0),u(null);try{const e=await o.A.get("/retention/");d(e.data),A(e.data.retention_days||"")}catch(p){console.error("Error fetching retention policy:",p),u("Failed to fetch retention policy. Please try again later."),n("danger","Failed to fetch retention policy. Please try again later.","Error")}finally{h(!1)}}),[n]);(0,a.useEffect)((()=>{f()}),[f]);return y?(0,c.jsx)(r.A,{animation:"border"}):(0,c.jsxs)("div",{style:{marginTop:"20px",padding:"20px"},children:[(0,c.jsx)("h2",{children:"Data Retention Policy"}),p&&(0,c.jsx)("p",{className:"text-danger",children:p}),t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Retention Days:"})," ",t.retention_days," days"]}),(0,c.jsx)(s.A,{variant:"primary",onClick:()=>g(!0),children:"Update Retention Policy"})]}),(0,c.jsxs)(i.A,{show:x,onHide:()=>g(!1),children:[(0,c.jsx)(i.A.Header,{closeButton:!0,children:(0,c.jsx)(i.A.Title,{children:"Update Retention Policy"})}),(0,c.jsx)(i.A.Body,{children:(0,c.jsx)(l.A,{children:(0,c.jsxs)(l.A.Group,{children:[(0,c.jsx)(l.A.Label,{children:"Retention Days"}),(0,c.jsx)(l.A.Control,{type:"number",value:j,onChange:e=>A(e.target.value||""),placeholder:"Enter retention days"})]})})}),(0,c.jsxs)(i.A.Footer,{children:[(0,c.jsx)(s.A,{variant:"secondary",onClick:()=>g(!1),children:"Close"}),(0,c.jsx)(s.A,{variant:"primary",onClick:async()=>{if(isNaN(j)||j<0)n("warning","Please enter a valid number for retention days.","Warning");else try{await o.A.put("/retention/",{retention_days:parseInt(j,10)}),n("success","Retention policy updated successfully!","Success"),f(),g(!1)}catch(p){console.error("Error updating retention policy:",p),n("danger","Failed to update retention policy. Please try again.","Error")}},children:"Save Changes"})]})]})]})}}}]);
//# sourceMappingURL=464.475b75dc.chunk.js.map