"use strict";(self.webpackChunkSales_tracking_app=self.webpackChunkSales_tracking_app||[]).push([[668],{3668:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var r=t(5043),l=t(9621),n=t(4282),a=t(4196),c=t(7491),o=t(2725),d=t(7417),i=t(3204),u=t(3814),h=t(579);const p=e=>{let{tour:s,fetchTours:t,onHide:a,showToast:c}=e;const[d,i]=(0,r.useState)({user_id:"",completed:!1,steps:[]});(0,r.useEffect)((()=>{s&&i({user_id:s.user_id,completed:s.completed,steps:s.steps||[]})}),[s]);return(0,h.jsxs)(o.A,{show:!0,onHide:a,centered:!0,children:[(0,h.jsx)(o.A.Header,{closeButton:!0,children:(0,h.jsx)(o.A.Title,{children:s?"Edit Tour":"Add Tour"})}),(0,h.jsx)(o.A.Body,{children:(0,h.jsxs)(u.A,{children:[(0,h.jsxs)(u.A.Group,{controlId:"formUserId",children:[(0,h.jsx)(u.A.Label,{children:"User ID"}),(0,h.jsx)(u.A.Control,{type:"text",placeholder:"Enter User ID",value:d.user_id,onChange:e=>i({...d,user_id:e.target.value}),disabled:!!s,required:!0})]}),(0,h.jsxs)(u.A.Group,{controlId:"formCompleted",children:[(0,h.jsx)(u.A.Label,{children:"Status"}),(0,h.jsx)(u.A.Check,{type:"checkbox",label:"Completed",checked:d.completed,onChange:e=>i({...d,completed:e.target.checked})})]}),(0,h.jsxs)(u.A.Group,{controlId:"formSteps",children:[(0,h.jsx)(u.A.Label,{children:"Steps"}),d.steps.map(((e,s)=>(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsx)(u.A.Control,{type:"text",placeholder:`Step ${s+1} Content`,value:e.content,onChange:e=>{const t=[...d.steps];t[s].content=e.target.value,i({...d,steps:t})}}),(0,h.jsx)(n.A,{variant:"danger",onClick:()=>(e=>{i((s=>{const t=s.steps.filter(((s,t)=>t!==e));return{...s,steps:t}}))})(s),className:"mt-1",children:"Remove Step"})]},s))),(0,h.jsx)(n.A,{variant:"success",onClick:()=>{i((e=>({...e,steps:[...e.steps,{content:"",order:e.steps.length+1}]})))},className:"mt-2",children:"Add Step"})]})]})}),(0,h.jsxs)(o.A.Footer,{children:[(0,h.jsx)(n.A,{variant:"secondary",onClick:a,children:"Close"}),(0,h.jsx)(n.A,{variant:"primary",onClick:async()=>{if(d.user_id)if(0===d.steps.length||d.steps.some((e=>!e.content)))c("danger","All steps must have content.","Error");else try{s?(await l.A.put(`/help/tours/${s.id}`,{...d,completed_at:s.completed_at}),c("success","Tour updated successfully.","Success")):(await l.A.post("/help/tours",{...d,completed:!1,completed_at:null}),c("success","Tour added successfully.","Success")),t(),a()}catch(e){console.error("Error saving tour:",e),c("danger","Failed to save tour.","Error")}else c("danger","User ID is required.","Error")},children:"Save Tour"})]})]})};var x=t(2301),j=t(3216);const m=e=>{let{showToast:s}=e;const[t,u]=(0,r.useState)(!1),[m,A]=(0,r.useState)(null),[f,v]=(0,r.useState)([]),[g,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),[C,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[T,$]=(0,r.useState)(!1),[E,_]=(0,r.useState)(1),D=(0,j.Zp)(),I=(0,r.useCallback)((async()=>{let e=!0;y(!0),N(null);try{const s=await l.A.get("/help/tours");e&&v(s.data)}catch(b){console.error("Error fetching tours:",b),e&&(b.response&&404===b.response.status?N("No tours found. You can add a new tour."):(N("Failed to fetch tours."),s("danger","Failed to fetch tours.","Error")))}finally{e&&y(!1)}return()=>{e=!1}}),[s]);(0,r.useEffect)((()=>{I()}),[I]);const F=function(){A(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),u(!0)},P=10*E,H=P-10,O=f.slice(H,P);return(0,r.useEffect)((()=>{_(1)}),[f]),g?(0,h.jsx)(x.A,{}):(0,h.jsxs)("div",{className:"container mt-5",role:"main",children:[(0,h.jsxs)("h1",{className:"text-center mb-4","aria-live":"polite",children:["Help Center ",(0,h.jsx)(i.gZZ,{})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-end mb-3",children:[(0,h.jsxs)(n.A,{variant:"secondary",onClick:()=>F(),children:[" ",(0,h.jsx)(i.OiG,{className:"me-1"})," Add Tour"]}),(0,h.jsxs)(n.A,{variant:"primary",onClick:()=>D("/help/steps"),children:[(0,h.jsx)(i.w8j,{className:"me-1"})," Manage Tour Steps"]})]}),b&&(0,h.jsx)("p",{className:"text-danger",role:"alert",children:b}),0===f.length?(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("p",{children:"No data available."}),(0,h.jsxs)(n.A,{variant:"secondary",onClick:()=>F(),children:[" ",(0,h.jsx)(i.OiG,{className:"me-1"})," Add a Tour"]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(a.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"ID"}),(0,h.jsx)("th",{children:"User ID"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Completed At"}),(0,h.jsx)("th",{children:"Actions"})]})}),(0,h.jsx)("tbody",{children:O.map((e=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.id}),(0,h.jsx)("td",{children:e.user_id}),(0,h.jsx)("td",{children:e.completed?"Completed":"In Progress"}),(0,h.jsx)("td",{children:e.completed_at||"N/A"}),(0,h.jsxs)("td",{children:[(0,h.jsxs)(n.A,{variant:"info",onClick:()=>F(e),"aria-label":`Edit tour ${e.id}`,children:[(0,h.jsx)(i.uO9,{className:"me-1"})," Edit"]}),(0,h.jsxs)(n.A,{variant:"danger",className:"ms-2",onClick:()=>{return s=e.id,S(s),void w(!0);var s},"aria-label":`Delete tour ${e.id}`,children:[(0,h.jsx)(i.qbC,{className:"me-1"})," Delete"]})]})]},e.id)))})]}),(0,h.jsxs)(c.A,{children:[(0,h.jsx)(c.A.Prev,{onClick:()=>_((e=>Math.max(e-1,1))),disabled:1===E}),Array.from({length:Math.ceil(f.length/10)},((e,s)=>(0,h.jsx)(c.A.Item,{active:s+1===E,onClick:()=>_(s+1),children:s+1},s+1))),(0,h.jsx)(c.A.Next,{onClick:()=>_((e=>Math.min(e+1,Math.ceil(f.length/10)))),disabled:E===Math.ceil(f.length/10)})]})]}),(0,h.jsxs)(o.A,{show:t,onHide:()=>u(!1),centered:!0,children:[(0,h.jsx)(o.A.Header,{closeButton:!0,children:(0,h.jsx)(o.A.Title,{children:m?"Edit Tour":"Add New Tour"})}),(0,h.jsx)(o.A.Body,{children:(0,h.jsx)(p,{tour:m,fetchTours:I,onHide:()=>u(!1),showToast:s,onSubmit:async e=>{try{m?(await l.A.put(`/help/tours/${m.id}`,{...e,completed:m.completed,completed_at:m.completed_at}),s("success","Tour updated successfully.","Success")):(await l.A.post("/help/tours",{user_id:e.user_id,completed:!1,completed_at:null,steps:e.steps}),s("success","Tour added successfully.","Success")),I(),u(!1),A(null)}catch(b){console.error("Error saving tour:",b),s("danger","Failed to save tour.","Error")}}})})]}),(0,h.jsxs)(o.A,{show:C,onHide:()=>w(!1),centered:!0,children:[(0,h.jsx)(o.A.Header,{closeButton:!0,children:(0,h.jsx)(o.A.Title,{children:"Confirm Deletion"})}),(0,h.jsxs)(o.A.Body,{children:[(0,h.jsx)("p",{children:"Are you sure you want to delete this tour?"}),T&&(0,h.jsx)(d.A,{animation:"border",variant:"danger"})]}),(0,h.jsxs)(o.A.Footer,{children:[(0,h.jsx)(n.A,{variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),(0,h.jsx)(n.A,{variant:"danger",onClick:async()=>{$(!0);try{await l.A.delete(`/help/tours/${k}`),s("success","Tour deleted successfully.","Success"),I()}catch(b){console.error("Error deleting tour:",b),s("danger","Failed to delete tour.","Error")}finally{w(!1),S(null),$(!1)}},disabled:T,children:T?"Deleting...":"Delete"})]})]})]})}},2673:(e,s,t)=>{t.d(s,{A:()=>d});var r=t(5043),l=(t(2667),t(8232),t(1456));t(6723),t(1342);t(4723);new WeakMap;var n=t(4140),a=t(579);const c=["onKeyDown"];const o=r.forwardRef(((e,s)=>{let{onKeyDown:t}=e,r=function(e,s){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;t[r]=e[r]}return t}(e,c);const[o]=(0,n.Am)(Object.assign({tagName:"a"},r)),d=(0,l.A)((e=>{o.onKeyDown(e),null==t||t(e)}));return(i=r.href)&&"#"!==i.trim()&&"button"!==r.role?(0,a.jsx)("a",Object.assign({ref:s},r,{onKeyDown:t})):(0,a.jsx)("a",Object.assign({ref:s},r,o,{onKeyDown:d}));var i}));o.displayName="Anchor";const d=o},7491:(e,s,t)=>{t.d(s,{A:()=>f});var r=t(8139),l=t.n(r),n=t(5043),a=t(7852),c=t(2673),o=t(579);const d=n.forwardRef(((e,s)=>{let{active:t=!1,disabled:r=!1,className:n,style:a,activeLabel:d="(current)",children:i,linkStyle:u,linkClassName:h,as:p=c.A,...x}=e;const j=t||r?"span":p;return(0,o.jsx)("li",{ref:s,style:a,className:l()(n,"page-item",{active:t,disabled:r}),children:(0,o.jsxs)(j,{className:l()("page-link",h),style:u,...x,children:[i,t&&d&&(0,o.jsx)("span",{className:"visually-hidden",children:d})]})})}));d.displayName="PageItem";const i=d;function u(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const r=n.forwardRef(((e,r)=>{let{children:l,...n}=e;return(0,o.jsxs)(d,{...n,ref:r,children:[(0,o.jsx)("span",{"aria-hidden":"true",children:l||s}),(0,o.jsx)("span",{className:"visually-hidden",children:t})]})}));return r.displayName=e,r}const h=u("First","\xab"),p=u("Prev","\u2039","Previous"),x=u("Ellipsis","\u2026","More"),j=u("Next","\u203a"),m=u("Last","\xbb"),A=n.forwardRef(((e,s)=>{let{bsPrefix:t,className:r,size:n,...c}=e;const d=(0,a.oU)(t,"pagination");return(0,o.jsx)("ul",{ref:s,...c,className:l()(r,d,n&&`${d}-${n}`)})}));A.displayName="Pagination";const f=Object.assign(A,{First:h,Prev:p,Ellipsis:x,Item:i,Next:j,Last:m})},4196:(e,s,t)=>{t.d(s,{A:()=>o});var r=t(8139),l=t.n(r),n=t(5043),a=t(7852),c=t(579);const o=n.forwardRef(((e,s)=>{let{bsPrefix:t,className:r,striped:n,bordered:o,borderless:d,hover:i,size:u,variant:h,responsive:p,...x}=e;const j=(0,a.oU)(t,"table"),m=l()(r,j,h&&`${j}-${h}`,u&&`${j}-${u}`,n&&`${j}-${"string"===typeof n?`striped-${n}`:"striped"}`,o&&`${j}-bordered`,d&&`${j}-borderless`,i&&`${j}-hover`),A=(0,c.jsx)("table",{...x,className:m,ref:s});if(p){let e=`${j}-responsive`;return"string"===typeof p&&(e=`${e}-${p}`),(0,c.jsx)("div",{className:e,children:A})}return A}))}}]);
//# sourceMappingURL=668.04786b3f.chunk.js.map