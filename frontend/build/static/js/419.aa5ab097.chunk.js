"use strict";(self.webpackChunkSales_tracking_app=self.webpackChunkSales_tracking_app||[]).push([[419],{419:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var r=t(5043),n=t(9621),a=t(4282),l=t(4196),i=t(7491),c=t(2725),d=t(7417),o=t(3204),h=t(3814),x=t(579);const p=e=>{let{step:s,fetchSteps:t,onHide:l,showToast:i}=e;const[d,o]=(0,r.useState)({page_name:"",target:"",content:"",order:0});(0,r.useEffect)((()=>{s&&o({page_name:s.page_name,target:s.target,content:s.content,order:s.order})}),[s]);return(0,x.jsxs)(c.A,{show:!0,onHide:l,centered:!0,children:[(0,x.jsx)(c.A.Header,{closeButton:!0,children:(0,x.jsx)(c.A.Title,{children:s?"Edit Step":"Add Step"})}),(0,x.jsx)(c.A.Body,{children:(0,x.jsxs)(h.A,{children:[(0,x.jsxs)(h.A.Group,{controlId:"formPageName",children:[(0,x.jsx)(h.A.Label,{children:"Page Name"}),(0,x.jsx)(h.A.Control,{type:"text",placeholder:"Enter Page Name",value:d.page_name,onChange:e=>o({...d,page_name:e.target.value}),required:!0})]}),(0,x.jsxs)(h.A.Group,{controlId:"formTarget",children:[(0,x.jsx)(h.A.Label,{children:"Target"}),(0,x.jsx)(h.A.Control,{type:"text",placeholder:"Enter Target",value:d.target,onChange:e=>o({...d,target:e.target.value}),required:!0})]}),(0,x.jsxs)(h.A.Group,{controlId:"formContent",children:[(0,x.jsx)(h.A.Label,{children:"Content"}),(0,x.jsx)(h.A.Control,{as:"textarea",rows:3,placeholder:"Enter Content",value:d.content,onChange:e=>o({...d,content:e.target.value}),required:!0})]}),(0,x.jsxs)(h.A.Group,{controlId:"formOrder",children:[(0,x.jsx)(h.A.Label,{children:"Order"}),(0,x.jsx)(h.A.Control,{type:"number",value:d.order,onChange:e=>o({...d,order:Number(e.target.value)}),required:!0})]})]})}),(0,x.jsxs)(c.A.Footer,{children:[(0,x.jsx)(a.A,{variant:"secondary",onClick:l,children:"Close"}),(0,x.jsx)(a.A,{variant:"primary",onClick:async()=>{try{s?(await n.A.put(`/help/steps/${s.id}`,d),i("success","Step updated successfully.","Success")):(await n.A.post("/help/steps",d),i("success","Step added successfully.","Success")),t(),l()}catch(e){console.error("Error saving step:",e),i("danger","Failed to save step.","Error")}},children:"Save Step"})]})]})};var u=t(2301),j=t(3216);const m=e=>{let{showToast:s}=e;const[t,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[A,f]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[$,E]=(0,r.useState)(!1),[P,O]=(0,r.useState)(1),D=(0,j.Zp)(),T=(0,r.useCallback)((async()=>{let e=!0;y(!0),N(null);try{const s=await n.A.get("/help/steps");e&&f(s.data)}catch(b){console.error("Error fetching steps:",b),e&&(N("Failed to fetch steps."),s("danger","Failed to fetch steps.","Error"))}finally{e&&y(!1)}return()=>{e=!1}}),[s]);(0,r.useEffect)((()=>{T()}),[T]);const _=function(){g(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),h(!0)},F=10*P,H=F-10,I=A.slice(H,F);return(0,r.useEffect)((()=>{O(1)}),[A]),v?(0,x.jsx)(u.A,{}):(0,x.jsxs)("div",{className:"container mt-5",role:"main",children:[(0,x.jsxs)(a.A,{variant:"secondary",onClick:()=>D(-1),className:"mb-4",children:[(0,x.jsx)(o.QVr,{className:"me-1"})," Back"]})," ",(0,x.jsx)("h1",{className:"text-center mb-4",children:"Help Steps"}),(0,x.jsx)("div",{className:"d-flex justify-content-end mb-3",children:(0,x.jsxs)(a.A,{variant:"secondary",onClick:_,children:[(0,x.jsx)(o.OiG,{className:"me-1"})," Add Step"]})}),b&&(0,x.jsx)("p",{className:"text-danger",role:"alert",children:b}),0===A.length?(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{children:"No data available."}),(0,x.jsxs)(a.A,{variant:"secondary",onClick:_,children:[(0,x.jsx)(o.OiG,{className:"me-1"})," Add a Step"]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(l.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"ID"}),(0,x.jsx)("th",{children:"Page Name"}),(0,x.jsx)("th",{children:"Target"}),(0,x.jsx)("th",{children:"Step Content"}),(0,x.jsx)("th",{children:"Order"}),(0,x.jsx)("th",{children:"Actions"})]})}),(0,x.jsx)("tbody",{children:I.map((e=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.id}),(0,x.jsx)("td",{children:e.page_name}),(0,x.jsx)("td",{children:e.target}),(0,x.jsx)("td",{children:e.content}),(0,x.jsx)("td",{children:e.order}),(0,x.jsxs)("td",{children:[(0,x.jsxs)(a.A,{variant:"info",onClick:()=>_(e),"aria-label":`Edit step ${e.id}`,children:[(0,x.jsx)(o.uO9,{className:"me-1"})," Edit"]}),(0,x.jsxs)(a.A,{variant:"danger",className:"ms-2",onClick:()=>{return s=e.id,k(s),void S(!0);var s},"aria-label":`Delete step ${e.id}`,children:[(0,x.jsx)(o.qbC,{className:"me-1"})," Delete"]})]})]},e.id)))})]}),(0,x.jsxs)(i.A,{children:[(0,x.jsx)(i.A.Prev,{onClick:()=>O((e=>Math.max(e-1,1))),disabled:1===P}),Array.from({length:Math.ceil(A.length/10)},((e,s)=>(0,x.jsx)(i.A.Item,{active:s+1===P,onClick:()=>O(s+1),children:s+1},s+1))),(0,x.jsx)(i.A.Next,{onClick:()=>O((e=>Math.min(e+1,Math.ceil(A.length/10)))),disabled:P===Math.ceil(A.length/10)})]})]}),(0,x.jsxs)(c.A,{show:t,onHide:()=>h(!1),centered:!0,children:[(0,x.jsx)(c.A.Header,{closeButton:!0,children:(0,x.jsx)(c.A.Title,{children:m?"Edit Step":"Add New Step"})}),(0,x.jsx)(c.A.Body,{children:(0,x.jsx)(p,{step:m,fetchSteps:T,onHide:()=>h(!1),showToast:s})})]}),(0,x.jsxs)(c.A,{show:C,onHide:()=>S(!1),centered:!0,children:[(0,x.jsx)(c.A.Header,{closeButton:!0,children:(0,x.jsx)(c.A.Title,{children:"Confirm Deletion"})}),(0,x.jsxs)(c.A.Body,{children:[(0,x.jsx)("p",{children:"Are you sure you want to delete this step?"}),$&&(0,x.jsx)(d.A,{animation:"border",variant:"danger"})]}),(0,x.jsxs)(c.A.Footer,{children:[(0,x.jsx)(a.A,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),(0,x.jsx)(a.A,{variant:"danger",onClick:async()=>{E(!0);try{await n.A.delete(`/help/steps/${w}`),s("success","Step deleted successfully.","Success"),T()}catch(b){console.error("Error deleting step:",b),s("danger","Failed to delete step.","Error")}finally{S(!1),k(null),E(!1)}},disabled:$,children:$?"Deleting...":"Delete"})]})]})]})}},2673:(e,s,t)=>{t.d(s,{A:()=>d});var r=t(5043),n=(t(2667),t(8232),t(1456));t(6723),t(1342);t(4723);new WeakMap;var a=t(4140),l=t(579);const i=["onKeyDown"];const c=r.forwardRef(((e,s)=>{let{onKeyDown:t}=e,r=function(e,s){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;t[r]=e[r]}return t}(e,i);const[c]=(0,a.Am)(Object.assign({tagName:"a"},r)),d=(0,n.A)((e=>{c.onKeyDown(e),null==t||t(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,l.jsx)("a",Object.assign({ref:s},r,{onKeyDown:t})):(0,l.jsx)("a",Object.assign({ref:s},r,c,{onKeyDown:d}));var o}));c.displayName="Anchor";const d=c},7491:(e,s,t)=>{t.d(s,{A:()=>A});var r=t(8139),n=t.n(r),a=t(5043),l=t(7852),i=t(2673),c=t(579);const d=a.forwardRef(((e,s)=>{let{active:t=!1,disabled:r=!1,className:a,style:l,activeLabel:d="(current)",children:o,linkStyle:h,linkClassName:x,as:p=i.A,...u}=e;const j=t||r?"span":p;return(0,c.jsx)("li",{ref:s,style:l,className:n()(a,"page-item",{active:t,disabled:r}),children:(0,c.jsxs)(j,{className:n()("page-link",x),style:h,...u,children:[o,t&&d&&(0,c.jsx)("span",{className:"visually-hidden",children:d})]})})}));d.displayName="PageItem";const o=d;function h(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const r=a.forwardRef(((e,r)=>{let{children:n,...a}=e;return(0,c.jsxs)(d,{...a,ref:r,children:[(0,c.jsx)("span",{"aria-hidden":"true",children:n||s}),(0,c.jsx)("span",{className:"visually-hidden",children:t})]})}));return r.displayName=e,r}const x=h("First","\xab"),p=h("Prev","\u2039","Previous"),u=h("Ellipsis","\u2026","More"),j=h("Next","\u203a"),m=h("Last","\xbb"),g=a.forwardRef(((e,s)=>{let{bsPrefix:t,className:r,size:a,...i}=e;const d=(0,l.oU)(t,"pagination");return(0,c.jsx)("ul",{ref:s,...i,className:n()(r,d,a&&`${d}-${a}`)})}));g.displayName="Pagination";const A=Object.assign(g,{First:x,Prev:p,Ellipsis:u,Item:o,Next:j,Last:m})},4196:(e,s,t)=>{t.d(s,{A:()=>c});var r=t(8139),n=t.n(r),a=t(5043),l=t(7852),i=t(579);const c=a.forwardRef(((e,s)=>{let{bsPrefix:t,className:r,striped:a,bordered:c,borderless:d,hover:o,size:h,variant:x,responsive:p,...u}=e;const j=(0,l.oU)(t,"table"),m=n()(r,j,x&&`${j}-${x}`,h&&`${j}-${h}`,a&&`${j}-${"string"===typeof a?`striped-${a}`:"striped"}`,c&&`${j}-bordered`,d&&`${j}-borderless`,o&&`${j}-hover`),g=(0,i.jsx)("table",{...u,className:m,ref:s});if(p){let e=`${j}-responsive`;return"string"===typeof p&&(e=`${e}-${p}`),(0,i.jsx)("div",{className:e,children:g})}return g}))}}]);
//# sourceMappingURL=419.aa5ab097.chunk.js.map