"use strict";(self.webpackChunkSales_tracking_app=self.webpackChunkSales_tracking_app||[]).push([[424],{7424:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(5043),r=a(5865),i=a(1906),s=a(4449),l=a(2110),o=a(5795),c=a(7417),d=a(3519),h=a(1072),p=a(8602),u=a(4196),x=a(7491),y=a(6579),j=a(7929),m=a(9621),A=a(579);const g=e=>{var t;let{showToast:a}=e;const[g,v]=(0,n.useState)([]),[f,C]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!1),[w,E]=(0,n.useState)(!1),[N,P]=(0,n.useState)(null),[b,_]=(0,n.useState)("add"),[B,F]=(0,n.useState)({name:"",location:""}),[I,L]=(0,n.useState)(1),[M,$]=(0,n.useState)(1),D=JSON.parse(localStorage.getItem("user")),T=parseInt(null===D||void 0===D?void 0:D.role_id)||(null===D||void 0===D||null===(t=D.role)||void 0===t?void 0:t.id);(0,n.useEffect)((()=>{(async()=>{C(!0);try{const e=await m.A.get(`/paypoints/?sort_by=created_at&per_page=10&page=${I}`);v(e.data.paypoints),$(Math.ceil(e.data.total/10))}catch(e){console.error("Error fetching paypoints:",e),a("error","Failed to fetch paypoints. Please try again later.","Error")}finally{C(!1)}})()}),[a,I]);const W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_(e),"edit"===e&&t?(P(t),F({name:t.name,location:t.location})):F({name:"",location:""}),k(!0)},H=()=>{k(!1),P(null)};return f?(0,A.jsx)(c.A,{animation:"border"}):(0,A.jsxs)(d.A,{className:"mt-4",children:[(0,A.jsx)(h.A,{children:(0,A.jsx)(p.A,{md:12,children:(0,A.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:"Paypoint Management"})})}),(0,A.jsx)(h.A,{children:(0,A.jsx)(p.A,{md:12,children:(2===T||3===T)&&(0,A.jsxs)(i.A,{variant:"contained",color:"primary",onClick:()=>W("add"),children:[(0,A.jsx)(y.g,{icon:j.QLR})," Add New Paypoint"]})})}),(0,A.jsx)(h.A,{className:"mt-4",children:(0,A.jsxs)(p.A,{md:12,children:[(0,A.jsxs)(u.A,{striped:!0,bordered:!0,hover:!0,children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"Name"}),(0,A.jsx)("th",{children:"Location"}),(0,A.jsx)("th",{children:"Actions"})]})}),(0,A.jsx)("tbody",{children:g.map((e=>(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:e.name}),(0,A.jsx)("td",{children:e.location}),(0,A.jsx)("td",{children:(2===T||3===T)&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(i.A,{variant:"contained",color:"secondary",onClick:()=>W("edit",e),className:"me-2",children:[(0,A.jsx)(y.g,{icon:j.MT7})," Edit"]}),(0,A.jsxs)(i.A,{variant:"contained",color:"error",onClick:()=>(e=>{e&&(P(e),E(!0))})(e),children:[(0,A.jsx)(y.g,{icon:j.BeE})," Delete"]})]})})]},e.id)))})]}),(0,A.jsx)(x.A,{children:Array.from({length:M},((e,t)=>(0,A.jsx)(x.A.Item,{active:t+1===I,onClick:()=>L(t+1),children:t+1},t+1)))})]})}),(0,A.jsx)(s.A,{open:S,onClose:H,style:{overflow:"auto"},children:(0,A.jsxs)(l.A,{style:{width:"50%",margin:"5% auto",padding:"20px",maxHeight:"80vh",overflowY:"auto"},children:[(0,A.jsx)(r.A,{variant:"h5",gutterBottom:!0,children:"add"===b?"Add New Paypoint":"Edit Paypoint"}),(0,A.jsx)(o.A,{fullWidth:!0,label:"Paypoint Name",value:B.name,onChange:e=>F({...B,name:e.target.value}),margin:"normal"}),(0,A.jsx)(o.A,{fullWidth:!0,label:"Location",value:B.location,onChange:e=>F({...B,location:e.target.value}),margin:"normal"}),(0,A.jsxs)(h.A,{className:"mt-3",children:[(0,A.jsx)(p.A,{md:6,children:(0,A.jsx)(i.A,{variant:"contained",color:"primary",onClick:async()=>{try{if("add"===b){const e=await m.A.post("/paypoints/",B);v((t=>[...t,e.data])),a("success","Paypoint added successfully.","Success")}else if("edit"===b&&N){const e=await m.A.put(`/paypoints/${N.id}`,B);v((t=>t.map((t=>t.id===N.id?e.data:t)))),a("success","Paypoint updated successfully.","Success")}H()}catch(e){console.error("Error saving paypoint:",e),a("error","Failed to save paypoint. Please try again later.","Error")}},children:"Save"})}),(0,A.jsx)(p.A,{md:6,children:(0,A.jsx)(i.A,{variant:"outlined",color:"secondary",onClick:H,children:"Cancel"})})]})]})}),(0,A.jsx)(s.A,{open:w,onClose:()=>E(!1),style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,A.jsxs)(l.A,{style:{padding:"20px"},children:[(0,A.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this paypoint?"}),(0,A.jsxs)(h.A,{className:"mt-3",children:[(0,A.jsx)(p.A,{md:6,children:(0,A.jsx)(i.A,{variant:"contained",color:"error",onClick:async()=>{if(N)try{await m.A.delete(`/paypoints/${N.id}`),v((e=>e.filter((e=>e.id!==N.id)))),a("success","Paypoint deleted successfully.","Success"),E(!1),P(null)}catch(e){console.error("Error deleting paypoint:",e),a("error","Failed to delete paypoint. Please try again later.","Error")}else a("error","No paypoint selected for deletion.","Error")},children:"Delete"})}),(0,A.jsx)(p.A,{md:6,children:(0,A.jsx)(i.A,{variant:"outlined",color:"secondary",onClick:()=>E(!1),children:"Cancel"})})]})]})})]})}}}]);
//# sourceMappingURL=424.74803527.chunk.js.map