"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[526],{6526:(e,n,r)=>{r.r(n),r.d(n,{default:()=>k});var a=r(5043),s=r(5865),t=r(1906),c=r(4449),l=r(2110),d=r(5795),i=r(7417),o=r(3519),h=r(1072),x=r(8602),u=r(4196),j=r(8861),m=r(9621),A=r(6579),y=r(7929),g=r(579);const k=e=>{let{showToast:n}=e;const[r,k]=(0,a.useState)([]),[v,f]=(0,a.useState)(!0),[b,p]=(0,a.useState)(!1),[C,B]=(0,a.useState)(!1),[S,w]=(0,a.useState)(!1),[E,N]=(0,a.useState)(!1),[_,F]=(0,a.useState)(!1),[M,P]=(0,a.useState)(null),[D,I]=(0,a.useState)(null),[$,T]=(0,a.useState)("add"),[W,H]=(0,a.useState)({name:""}),[L,Q]=(0,a.useState)({name:"",sort_code:""}),[R,Y]=(0,a.useState)([]),[q,z]=(0,a.useState)(1);(0,a.useEffect)((()=>{(async()=>{f(!0);try{const e=await m.A.get("/bank/");k(e.data)}catch(e){console.error("Error fetching banks:",e),n("error","Failed to fetch banks. Please try again later.","Error")}finally{f(!1)}})()}),[n]);const G=10*q,J=G-10,K=r.slice(J,G),O=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;T(e),"edit"===e&&n?(P(n),H({name:n.name})):H({name:""}),p(!0)},U=()=>{p(!1),P(null)};return v?(0,g.jsx)(i.A,{animation:"border"}):(0,g.jsxs)(o.A,{className:"mt-4",children:[(0,g.jsx)(h.A,{children:(0,g.jsx)(x.A,{md:12,children:(0,g.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Bank and Branch Management"})})}),(0,g.jsx)(h.A,{children:(0,g.jsx)(x.A,{md:12,children:(0,g.jsxs)(t.A,{variant:"contained",color:"primary",onClick:()=>O("add"),children:[(0,g.jsx)(A.g,{icon:y.QLR})," Add New Bank"]})})}),(0,g.jsx)(h.A,{className:"mt-4",children:(0,g.jsxs)(x.A,{md:12,children:[(0,g.jsxs)(u.A,{striped:!0,bordered:!0,hover:!0,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Name"}),(0,g.jsx)("th",{children:"Actions"})]})}),(0,g.jsx)("tbody",{children:K.map((e=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:e.name}),(0,g.jsxs)("td",{children:[(0,g.jsxs)(t.A,{variant:"contained",color:"secondary",onClick:()=>O("edit",e),className:"me-2",children:[(0,g.jsx)(A.g,{icon:y.MT7})," Edit"]}),(0,g.jsxs)(t.A,{variant:"contained",color:"error",onClick:()=>(e=>{e&&(P(e),w(!0))})(e),children:[(0,g.jsx)(A.g,{icon:y.BeE})," Delete"]}),(0,g.jsxs)(t.A,{variant:"contained",color:"info",onClick:()=>(e=>{P(e),Y(e.bank_branches||[]),B(!0)})(e),className:"ms-2",children:[(0,g.jsx)(A.g,{icon:y.FFg})," Manage Branches"]})]})]},e.id)))})]}),(0,g.jsx)(j.A,{children:Array.from({length:Math.ceil(r.length/10)},((e,n)=>(0,g.jsx)(j.A.Item,{active:n+1===q,onClick:()=>z(n+1),children:n+1},n+1)))})]})}),(0,g.jsx)(c.A,{open:b,onClose:U,style:{overflow:"auto"},children:(0,g.jsxs)(l.A,{style:{width:"50%",margin:"5% auto",padding:"20px",maxHeight:"80vh",overflowY:"auto"},children:[(0,g.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:"add"===$?"Add New Bank":"Edit Bank"}),(0,g.jsx)(d.A,{fullWidth:!0,label:"Bank Name",value:W.name,onChange:e=>H({...W,name:e.target.value}),margin:"normal"}),(0,g.jsxs)(h.A,{className:"mt-3",children:[(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"contained",color:"primary",onClick:async()=>{try{if("add"===$){const e=await m.A.post("/bank/",W);k((n=>[...n,e.data])),n("success","Bank added successfully.","Success")}else if("edit"===$&&M){const e=await m.A.put(`/bank/${M.id}`,W);k((n=>n.map((n=>n.id===M.id?e.data:n)))),n("success","Bank updated successfully.","Success")}U()}catch(e){console.error("Error saving bank:",e),n("error","Failed to save bank. Please try again later.","Error")}},children:"Save"})}),(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"outlined",color:"secondary",onClick:U,children:"Cancel"})})]})]})}),(0,g.jsx)(c.A,{open:C,onClose:()=>{B(!1),Q({name:"",sort_code:""})},style:{overflow:"auto"},children:(0,g.jsxs)(l.A,{style:{width:"70%",margin:"3% auto",padding:"20px",maxHeight:"80vh",overflowY:"auto"},children:[(0,g.jsxs)(s.A,{variant:"h5",gutterBottom:!0,children:["Manage Branches for ",null===M||void 0===M?void 0:M.name]}),(0,g.jsxs)(u.A,{striped:!0,bordered:!0,hover:!0,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Name"}),(0,g.jsx)("th",{children:"Sort Code"}),(0,g.jsx)("th",{children:"Actions"})]})}),(0,g.jsx)("tbody",{children:R.map((e=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:e.sort_code}),(0,g.jsxs)("td",{children:[(0,g.jsxs)(t.A,{variant:"contained",color:"secondary",onClick:()=>(e=>{e&&(Q({name:e.name,sort_code:e.sort_code,id:e.id}),I(e),T("edit"),N(!0))})(e),className:"me-2",children:[(0,g.jsx)(A.g,{icon:y.MT7})," Edit"]}),(0,g.jsxs)(t.A,{variant:"contained",color:"error",onClick:()=>(e=>{e&&(I(e),F(!0))})(e),children:[(0,g.jsx)(A.g,{icon:y.BeE})," Delete"]})]})]},e.id)))})]}),(0,g.jsxs)(t.A,{variant:"contained",color:"primary",onClick:()=>{Q({name:"",sort_code:""}),T("add"),N(!0)},className:"mt-3",children:[(0,g.jsx)(A.g,{icon:y.QLR})," Add New Branch"]})]})}),(0,g.jsx)(c.A,{open:E,onClose:()=>N(!1),style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,g.jsxs)(l.A,{style:{width:"30%",padding:"20px"},children:[(0,g.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:"add"===$?"Add Branch":"Edit Branch"}),(0,g.jsx)(d.A,{fullWidth:!0,label:"Branch Name",value:L.name,onChange:e=>Q({...L,name:e.target.value}),margin:"normal"}),(0,g.jsx)(d.A,{fullWidth:!0,label:"Sort Code",value:L.sort_code,onChange:e=>Q({...L,sort_code:e.target.value}),margin:"normal"}),(0,g.jsxs)(h.A,{className:"mt-3",children:[(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"contained",color:"primary",onClick:async()=>{if(M)try{if("add"===$){const e=await m.A.post("/bank/bank-branches",{bank_id:M.id,name:L.name,sort_code:L.sort_code,is_deleted:!1});Y((n=>[...n,e.data])),n("success","Branch added successfully.","Success")}else if("edit"===$&&D){const e=await m.A.put(`/bank/bank-branches/${D.id}`,L);Y((n=>n.map((n=>n.id===D.id?e.data:n)))),n("success","Branch updated successfully.","Success")}N(!1)}catch(e){console.error("Error saving branch:",e),n("error","Failed to save branch. Please try again later.","Error")}else n("error","No bank selected for branch operation.","Error")},children:"Save"})}),(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"outlined",color:"secondary",onClick:()=>N(!1),children:"Cancel"})})]})]})}),(0,g.jsx)(c.A,{open:_,onClose:()=>F(!1),style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,g.jsxs)(l.A,{style:{padding:"20px"},children:[(0,g.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this branch?"}),(0,g.jsxs)(h.A,{className:"mt-3",children:[(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"contained",color:"error",onClick:async()=>{if(D)try{await m.A.delete(`/bank/bank-branches/${D.id}`),Y((e=>e.filter((e=>e.id!==D.id)))),n("success","Branch deleted successfully.","Success"),F(!1),I(null)}catch(e){console.error("Error deleting branch:",e),n("error","Failed to delete branch. Please try again later.","Error")}else n("error","No branch selected for deletion.","Error")},children:"Delete"})}),(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"outlined",color:"secondary",onClick:()=>F(!1),children:"Cancel"})})]})]})}),(0,g.jsx)(c.A,{open:S,onClose:()=>w(!1),style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,g.jsxs)(l.A,{style:{padding:"20px"},children:[(0,g.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this bank?"}),(0,g.jsxs)(h.A,{className:"mt-3",children:[(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"contained",color:"error",onClick:async()=>{if(M)try{await m.A.delete(`/bank/${M.id}`),k((e=>e.filter((e=>e.id!==M.id)))),n("success","Bank deleted successfully.","Success"),w(!1),P(null)}catch(e){console.error("Error deleting bank:",e),n("error","Failed to delete bank. Please try again later.","Error")}else n("error","No bank selected for deletion.","Error")},children:"Delete"})}),(0,g.jsx)(x.A,{md:6,children:(0,g.jsx)(t.A,{variant:"outlined",color:"secondary",onClick:()=>w(!1),children:"Cancel"})})]})]})})]})}}}]);
//# sourceMappingURL=526.0251f796.chunk.js.map