(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[804],{735:()=>{},5804:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>N});var s=n(5043),t=n(4063),r=n(4282),i=n(8861),l=n(7417),c=n(1072),o=n(8602),d=n(3814),m=n(4196),u=n(5751),h=n(6579),_=n(7929),p=n(9621),x=n(1899),b=n.n(x),j=(n(5015),n(1036)),y=n(579);const g=e=>{let{saleData:a,onSubmit:n,onCancel:t}=e;const[r,i]=(0,s.useState)({sale_manager_id:"",sales_executive_id:"",client_name:"",client_id_no:"",client_phone:"",serial_number:"",collection_platform:"",source_type:"",momo_reference_number:"",momo_transaction_id:"",first_pay_with_momo:!1,subsequent_pay_source_type:"",bank_id:"",bank_branch_id:"",bank_acc_number:"",paypoint_id:"",paypoint_branch:"",staff_id:"",policy_type_id:"",amount:"",customer_called:!1,geolocation_latitude:"",geolocation_longitude:"",momo_first_premium:!1,is_deleted:!1,status:"submitted"}),[l,c]=(0,s.useState)({}),[o,d]=(0,s.useState)([]),[m,u]=(0,s.useState)([]),[h,_]=(0,s.useState)([]),[x,b]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[f,k]=(0,s.useState)([]),[N,A]=(0,s.useState)(!1);(0,s.useEffect)((()=>{w(),P(),C(),S(),a&&i(a),navigator.geolocation.getCurrentPosition((e=>{A(!0),i((a=>({...a,geolocation_latitude:e.coords.latitude,geolocation_longitude:e.coords.longitude})))}),(()=>{j.oR.error("Please enable location services to proceed."),A(!1)}))}),[a]);const C=async()=>{try{const e=await p.A.get("/dropdown/",{params:{type:"users_with_roles",role_id:4}});k(e.data)}catch(e){j.oR.error("Failed to fetch sales managers")}},S=async()=>{try{const e=await p.A.get("/dropdown/",{params:{type:"paypoint"}});v(e.data)}catch(e){j.oR.error("Failed to fetch paypoints")}},w=async()=>{try{const e=await p.A.get("/bank/");_(e.data)}catch(e){j.oR.error("Failed to fetch banks")}},P=async()=>{try{const e=await p.A.get("/impact_products/");u(e.data.products)}catch(e){j.oR.error("Failed to fetch impact products")}},F=e=>{const{name:a,value:n,type:s,checked:t}=e.target;if(i((e=>({...e,[a]:"checkbox"===s?t:n}))),"sale_manager_id"===a&&(async e=>{try{const a=await p.A.get("/dropdown/",{params:{type:"sales_executive",manager_id:e}});d(a.data)}catch(a){j.oR.error("Failed to fetch sales executives")}})(n),"bank_id"===a&&(async e=>{try{if(e){const a=await p.A.get("/dropdown/",{params:{type:"branch",bank_id:e}});b(a.data)}else b([])}catch(a){j.oR.error("Failed to fetch branches")}})(n),"source_type"===a){const e="momo"===n;i((a=>({...a,momo_reference_number:e?a.momo_reference_number:"",momo_transaction_id:e?a.momo_transaction_id:"",bank_id:e?"":a.bank_id,bank_branch_id:e?"":a.bank_branch_id,bank_acc_number:e?"":a.bank_acc_number,paypoint_id:"paypoint"===n?a.paypoint_id:"",paypoint_branch:"paypoint"===n?a.paypoint_branch:"",staff_id:e?"":a.staff_id,subsequent_pay_source_type:e?a.subsequent_pay_source_type:""})))}};return(0,y.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(r.sale_manager_id||(e.sale_manager_id="Sale manager is required"),r.sales_executive_id||(e.sales_executive_id="Sales executive is required"),r.client_name||(e.client_name="Client name is required"),r.client_id_no||(e.client_id_no="Client ID number is required"),r.policy_type_id||(e.policy_type_id="Policy type is required"),r.client_phone&&10===r.client_phone.length||(e.client_phone="Valid client phone number is required"),r.serial_number||(e.serial_number="Serial number is required"),r.amount||(e.amount="Amount is required"),"momo"===r.source_type&&(r.momo_reference_number||(e.momo_reference_number="Momo reference number is required"),r.momo_transaction_id||(e.momo_transaction_id="Momo transaction ID is required")),"paypoint"!==r.source_type&&"paypoint"!==r.subsequent_pay_source_type||(r.paypoint_id||(e.paypoint_id="PayPoint name is required"),r.staff_id||(e.staff_id="Staff ID is required")),"bank"===r.source_type||"bank"===r.subsequent_pay_source_type)if(r.bank_id||(e.bank_id="Bank is required"),r.bank_branch_id||(e.bank_branch_id="Bank branch is required"),r.bank_acc_number){const a=r.bank_acc_number.length,n=r.bank_id||"";n.includes("UBA")&&14!==a?e.bank_acc_number="UBA account number must be 14 digits":(n.includes("Zenith")||n.includes("Absa"))&&10!==a?e.bank_acc_number="Zenith or Absa account number must be 10 digits":n.includes("SG")&&12!==a&&13!==a?e.bank_acc_number="SG account number must be 12 or 13 digits":13!==a&&16!==a&&(e.bank_acc_number="Account number must be 13 or 16 digits")}else e.bank_acc_number="Bank account number is required";return c(e),0===Object.keys(e).length})())try{const e={...r,sale_manager_id:parseInt(r.sale_manager_id,10),sales_executive_id:parseInt(r.sales_executive_id,10),policy_type_id:parseInt(r.policy_type_id,10),amount:parseFloat(r.amount),bank_id:r.bank_id?parseInt(r.bank_id,10):void 0,bank_branch_id:r.bank_branch_id?parseInt(r.bank_branch_id,10):void 0,paypoint_id:r.paypoint_id?parseInt(r.paypoint_id,10):void 0,geolocation:{latitude:parseFloat(r.geolocation_latitude),longitude:parseFloat(r.geolocation_longitude)}};Object.keys(e).forEach((a=>{void 0===e[a]&&delete e[a]}));const a=await p.A.post("/sales/",e,{headers:{"Content-Type":"application/json"}});201===a.status||200===a.status?(j.oR.success("Sale submitted successfully!"),n()):j.oR.error("Failed to submit the sale. Please try again.")}catch(a){console.error("Error submitting sale:",a),j.oR.error("Failed to submit the sale")}},className:N?"":"disabled",children:[!N&&(0,y.jsx)("div",{className:"text-danger mb-3",children:"Please enable location services to proceed."}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Sale Manager"}),(0,y.jsxs)("select",{className:"form-control",name:"sale_manager_id",value:r.sale_manager_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Sale Manager"}),f.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.sale_manager_id&&(0,y.jsx)("div",{className:"text-danger",children:l.sale_manager_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Sales Executive"}),(0,y.jsxs)("select",{className:"form-control",name:"sales_executive_id",value:r.sales_executive_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Sales Executive"}),o.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.sales_executive_id&&(0,y.jsx)("div",{className:"text-danger",children:l.sales_executive_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Client Name"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"client_name",value:r.client_name,onChange:F,disabled:!N}),l.client_name&&(0,y.jsx)("div",{className:"text-danger",children:l.client_name})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Client Phone Number"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"client_phone",value:r.client_phone,onChange:F,disabled:!N}),l.client_phone&&(0,y.jsx)("div",{className:"text-danger",children:l.client_phone})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Client Ghana Card ID No. (\"no hyphens\" - e.g. 'GHA123435555')"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"client_id_no",value:r.client_id_no,onChange:F,disabled:!N}),l.client_id_no&&(0,y.jsx)("div",{className:"text-danger",children:l.client_id_no})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Pay Source"}),(0,y.jsxs)("select",{className:"form-control",name:"source_type",value:r.source_type,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Please select"}),(0,y.jsx)("option",{value:"momo",children:"Momo"}),(0,y.jsx)("option",{value:"bank",children:"Bank"}),(0,y.jsx)("option",{value:"paypoint",children:"PayPoint"})]}),l.source_type&&(0,y.jsx)("div",{className:"text-danger",children:l.source_type})]}),"momo"===r.source_type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Momo Reference Number"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"momo_reference_number",value:r.momo_reference_number,onChange:F,disabled:!N}),l.momo_reference_number&&(0,y.jsx)("div",{className:"text-danger",children:l.momo_reference_number})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Momo Transaction ID"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"momo_transaction_id",value:r.momo_transaction_id,onChange:F,disabled:!N}),l.momo_transaction_id&&(0,y.jsx)("div",{className:"text-danger",children:l.momo_transaction_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Collection Platform"}),(0,y.jsxs)("select",{className:"form-control",name:"collection_platform",value:r.collection_platform,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Please select"}),(0,y.jsx)("option",{value:"Transflow",children:"Transflow"}),(0,y.jsx)("option",{value:"Hubtel",children:"Hubtel"}),(0,y.jsx)("option",{value:"company Momo number",children:"Company Momo Number"})]}),l.collection_platform&&(0,y.jsx)("div",{className:"text-danger",children:l.collection_platform})]}),(0,y.jsxs)("div",{className:"form-check",children:[(0,y.jsx)("input",{type:"checkbox",className:"form-check-input",id:"first_pay_with_momo",name:"first_pay_with_momo",checked:r.first_pay_with_momo,onChange:F,disabled:!N}),(0,y.jsx)("label",{className:"form-check-label",htmlFor:"first_pay_with_momo",children:"First payment with Momo?"})]})]}),"paypoint"===r.source_type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"PayPoint Name"}),(0,y.jsxs)("select",{type:"text",className:"form-control",name:"paypoint_id",value:r.paypoint_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Paypoint"}),g.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.paypoint_id&&(0,y.jsx)("div",{className:"text-danger",children:l.paypoint_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"PayPoint Branch"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"paypoint_branch",value:r.paypoint_branch,onChange:F,disabled:!N}),l.paypoint_branch&&(0,y.jsx)("div",{className:"text-danger",children:l.paypoint_branch})]})]}),"bank"===r.source_type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Bank"}),(0,y.jsxs)("select",{className:"form-control",name:"bank_id",value:r.bank_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Bank"}),h.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.bank_id&&(0,y.jsx)("div",{className:"text-danger",children:l.bank_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Bank Branch"}),(0,y.jsxs)("select",{className:"form-control",name:"bank_branch_id",value:r.bank_branch_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Branch"}),x.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.bank_branch_id&&(0,y.jsx)("div",{className:"text-danger",children:l.bank_branch_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Bank Account Number"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"bank_acc_number",value:r.bank_acc_number,onChange:F,disabled:!N}),l.bank_acc_number&&(0,y.jsx)("div",{className:"text-danger",children:l.bank_acc_number})]})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Policy Type (Impact Product)"}),(0,y.jsxs)("select",{className:"form-control",name:"policy_type_id",value:r.policy_type_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Product"}),m.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.policy_type_id&&(0,y.jsx)("div",{className:"text-danger",children:l.policy_type_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Policy Form Serial Number"}),(0,y.jsx)("input",{className:"form-control",name:"serial_number",value:r.serial_number,onChange:F,disabled:!N}),l.serial_number&&(0,y.jsx)("div",{className:"text-danger",children:l.serial_number})]}),r.first_pay_with_momo&&(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Subsequent Payment Method"}),(0,y.jsxs)("select",{className:"form-control",name:"subsequent_pay_source_type",value:r.subsequent_pay_source_type,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"options",children:"Please select"}),(0,y.jsx)("option",{value:"paypoint",children:"PayPoint"}),(0,y.jsx)("option",{value:"bank",children:"Bank"})]}),l.subsequent_pay_source_type&&(0,y.jsx)("div",{className:"text-danger",children:l.subsequent_pay_source_type})]}),"paypoint"===r.subsequent_pay_source_type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"PayPoint Name"}),(0,y.jsxs)("select",{type:"text",className:"form-control",name:"paypoint_id",value:r.paypoint_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Paypoint"}),g.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.paypoint_id&&(0,y.jsx)("div",{className:"text-danger",children:l.paypoint_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"PayPoint Branch"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"paypoint_branch",value:r.paypoint_branch,onChange:F,disabled:!N}),l.paypoint_branch&&(0,y.jsx)("div",{className:"text-danger",children:l.paypoint_branch})]})]}),"bank"===r.subsequent_pay_source_type&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Bank"}),(0,y.jsxs)("select",{className:"form-control",name:"bank_id",value:r.bank_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Bank"}),h.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.bank_id&&(0,y.jsx)("div",{className:"text-danger",children:l.bank_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Bank Branch"}),(0,y.jsxs)("select",{className:"form-control",name:"bank_branch_id",value:r.bank_branch_id,onChange:F,disabled:!N,children:[(0,y.jsx)("option",{value:"",children:"Select Branch"}),x.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]}),l.bank_branch_id&&(0,y.jsx)("div",{className:"text-danger",children:l.bank_branch_id})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Bank Account Number"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"bank_acc_number",value:r.bank_acc_number,onChange:F,disabled:!N}),l.bank_acc_number&&(0,y.jsx)("div",{className:"text-danger",children:l.bank_acc_number})]})]}),("paypoint"===r.source_type||"bank"===r.source_type||"paypoint"===r.subsequent_pay_source_type||"bank"===r.subsequent_pay_source_type)&&(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Staff Number"}),(0,y.jsx)("input",{type:"text",className:"form-control",name:"staff_id",value:r.staff_id,onChange:F,disabled:!N}),l.staff_id&&(0,y.jsx)("div",{className:"text-danger",children:l.staff_id})]}),(0,y.jsxs)("div",{className:"form-check",children:[(0,y.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customer_called",name:"customer_called",checked:r.customer_called,onChange:F,disabled:!N}),(0,y.jsx)("label",{className:"form-check-label",htmlFor:"customer_called",children:"Has the customer been called?"})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{children:"Premium Amount"}),(0,y.jsx)("input",{type:"number",className:"form-control",name:"amount",value:r.amount,onChange:F,disabled:!N}),l.amount&&(0,y.jsx)("div",{className:"text-danger",children:l.amount})]}),(0,y.jsx)("div",{style:{color:"red",fontSize:"11px"},children:(0,y.jsx)("em",{children:"Premium amounts are strictly in Ghana Cedis (GHS)"})}),(0,y.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Submit Sale"}),(0,y.jsx)("button",{type:"button",className:"btn btn-secondary mt-3 ml-2",onClick:t,children:"Cancel"})]})};var v=n(735),f=n.n(v),k=n(3216);const N=e=>{let{userRole:a,loggedInUserId:n,showToast:x}=e;const[j,v]=(0,s.useState)([]),[N,A]=(0,s.useState)(!0),[C,S]=(0,s.useState)({key:"client_name",direction:"asc"}),[w,P]=(0,s.useState)(1),[F,B]=(0,s.useState)(1),[I,D]=(0,s.useState)({startDate:null,endDate:null,clientName:"",bankId:"",branchId:""}),[q,E]=(0,s.useState)(!1),[M,R]=(0,s.useState)(!1),[G,L]=(0,s.useState)(null),[T,O]=(0,s.useState)([]),[H,$]=(0,s.useState)([]),[z,K]=(0,s.useState)([]),U=(0,k.Zp)(),Z=(0,s.useCallback)((async()=>{try{const e=await p.A.get("/bank/");O(e.data)}catch(e){console.error("Error fetching banks:",e),x("danger","Failed to fetch banks.","Error")}}),[x]),J=(0,s.useCallback)((async()=>{try{const e=await p.A.get("/sales_executives/",{params:{sort_by:"created_at",per_page:1e4,page:1}});K(Array.isArray(e.data.sales_executives)?e.data.sales_executives:[])}catch(e){console.error("Error fetching sales executives:",e),x("danger","Failed to fetch sales executives.","Error"),K([])}}),[x]),V=(0,s.useCallback)((async(e,s,t,r)=>{A(!0);try{const i={page:e,limit:20,sort_by:s,sort_direction:t,...r};"sales_manager"===a&&(i.sales_manager_id=n);const l=await p.A.get("/sales/",{params:i});v(l.data.sales||[]),B(l.data.pages||1)}catch(i){console.error("Error fetching sales records:",i),x("danger","Failed to fetch sales records.","Error")}finally{A(!1)}}),[20,a,n,x]),W=e=>{let a="asc";C.key===e&&"asc"===C.direction&&(a="desc"),S({key:e,direction:a})},Y=e=>{e>=1&&e<=F&&P(e)},Q=e=>{const{name:a,value:n}=e.target;D((e=>({...e,[a]:n}))),"bankId"===a&&(async e=>{try{if(e){const a=await p.A.get("/dropdown/",{params:{type:"branch",bank_id:e}});$(a.data)}else $([])}catch(a){console.error("Error fetching branches:",a),x("danger","Failed to fetch branches.","Error")}})(n)},X=async e=>{try{await p.A.delete(`/sales/${e}`),v(j.filter((a=>a.id!==e))),x("success","Sale deleted successfully.","Success")}catch(a){console.error("Error deleting sale:",a),x("danger","Failed to delete sale.","Error")}},ee=e=>C.key===e?"asc"===C.direction?(0,y.jsx)(h.g,{icon:_.Dvs}):(0,y.jsx)(h.g,{icon:_.Ync}):(0,y.jsx)(h.g,{icon:_.OM7}),ae=async e=>{if(G)try{const a=await p.A.put(`/sales/${G.id}`,e);v(j.map((e=>e.id===G.id?{...e,...a.data}:e))),x("success","Sale updated successfully.","Success")}catch(a){console.error("Error updating sale record:",a),x("danger","Failed to update sale.","Error")}else try{const a=await p.A.post("/sales/",e);v([...j,a.data]),x("success","Sale added successfully.","Success")}catch(a){console.error("Error adding new sale record:",a),x("danger","Failed to add new sale.","Error")}E(!1),L(null)},ne=e=>{let a="secondary";return"submitted"===e?a="success":"under investigation"===e?a="warning":"rejected"===e&&(a="danger"),(0,y.jsx)(t.A,{bg:a,className:"text-white",children:e})};(0,s.useEffect)((()=>{V(w,C.key,C.direction,I)}),[w,C,I,V]),(0,s.useEffect)((()=>{Z(),J()}),[Z,J]);const se=e=>{const a=JSON.parse(localStorage.getItem("user")),n=parseInt(a.role_id)||a.role.id;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.A,{variant:"primary",size:"sm",className:"me-2",onClick:()=>{return a=e.id,void U(`/sales/${a}`);var a},children:(0,y.jsx)(h.g,{icon:_.pS3})}),3===n||2===n?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.A,{variant:"warning",size:"sm",className:"me-2",onClick:()=>(e=>{L(e),E(!0)})(e),children:(0,y.jsx)(h.g,{icon:_.MT7})}),(0,y.jsx)(r.A,{variant:"danger",size:"sm",onClick:()=>X(e.id),children:(0,y.jsx)(h.g,{icon:_.yLS})})]}):null]})};return N?(0,y.jsx)("div",{className:"text-center mt-5",children:(0,y.jsx)(l.A,{animation:"border"})}):(0,y.jsxs)("div",{className:"container mt-5",children:[(0,y.jsxs)(c.A,{className:"mb-3",children:[(0,y.jsx)(o.A,{children:(0,y.jsx)("h2",{className:"text-left",children:"Sales Records"})}),(0,y.jsx)(o.A,{className:"text-right",children:(0,y.jsx)(r.A,{onClick:()=>E(!0),variant:"primary",className:"mb-3",children:"Make Sale"})})]}),(0,y.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),P(1),V(1,C.key,C.direction,I)},className:"mb-4",children:(0,y.jsxs)(c.A,{children:[(0,y.jsx)(o.A,{children:(0,y.jsxs)(d.A.Group,{controlId:"filterStartDate",children:[(0,y.jsx)(d.A.Label,{children:"Start Date"}),(0,y.jsx)(b(),{selected:I.startDate,onChange:e=>D((a=>({...a,startDate:e}))),className:"form-control",isClearable:!0})]})}),(0,y.jsx)(o.A,{children:(0,y.jsxs)(d.A.Group,{controlId:"filterEndDate",children:[(0,y.jsx)(d.A.Label,{children:"End Date"}),(0,y.jsx)(b(),{selected:I.endDate,onChange:e=>D((a=>({...a,endDate:e}))),className:"form-control",isClearable:!0})]})}),(0,y.jsx)(o.A,{children:(0,y.jsxs)(d.A.Group,{controlId:"filterClientName",children:[(0,y.jsx)(d.A.Label,{children:"Client Name"}),(0,y.jsx)(d.A.Control,{type:"text",name:"clientName",value:I.clientName,onChange:Q,placeholder:"Enter client name"})]})}),(0,y.jsx)(o.A,{children:(0,y.jsxs)(d.A.Group,{controlId:"filterBank",children:[(0,y.jsx)(d.A.Label,{children:"Bank"}),(0,y.jsxs)(d.A.Control,{as:"select",name:"bankId",value:I.bankId,onChange:Q,children:[(0,y.jsx)("option",{value:"",children:"Select Bank"}),T.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})}),(0,y.jsx)(o.A,{children:(0,y.jsxs)(d.A.Group,{controlId:"filterBranch",children:[(0,y.jsx)(d.A.Label,{children:"Branch"}),(0,y.jsxs)(d.A.Control,{as:"select",name:"branchId",value:I.branchId,onChange:Q,children:[(0,y.jsx)("option",{value:"",children:"Select Branch"}),H.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})}),(0,y.jsx)(o.A,{className:"align-self-end",children:(0,y.jsx)(r.A,{variant:"primary",type:"submit",children:"Filter"})})]})}),(0,y.jsxs)(m.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-3",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"#"}),(0,y.jsxs)("th",{onClick:()=>W("client_name"),children:["Client Name ",ee("client_name")]}),(0,y.jsxs)("th",{onClick:()=>W("amount"),children:["Amount ",ee("amount")]}),(0,y.jsxs)("th",{onClick:()=>W("policy_type"),children:["Policy Type ",ee("policy_type")]}),(0,y.jsxs)("th",{onClick:()=>W("serial_number"),children:["Serial Number ",ee("serial_number")]}),(0,y.jsxs)("th",{onClick:()=>W("sales_manager"),children:["Sales Manager ",ee("sales_manager")]}),(0,y.jsxs)("th",{onClick:()=>W("sales_executive_id"),children:["Sales Executive ",ee("sales_executive_id")]}),(0,y.jsxs)("th",{onClick:()=>W("source_type"),children:["Source Type ",ee("source_type")]}),(0,y.jsxs)("th",{onClick:()=>W("status"),children:["Status ",ee("status")]}),(0,y.jsxs)("th",{onClick:()=>W("created_at"),children:["Date ",ee("created_at")]}),(0,y.jsx)("th",{children:"Actions"})]})}),(0,y.jsx)("tbody",{children:j.length>0?j.map(((e,a)=>{var n,s,t;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:20*(w-1)+a+1}),(0,y.jsx)("td",{children:e.client_name}),(0,y.jsx)("td",{children:e.amount}),(0,y.jsx)("td",{children:(null===(n=e.policy_type)||void 0===n?void 0:n.name)||"N/A"}),(0,y.jsx)("td",{children:e.serial_number}),(0,y.jsx)("td",{children:(null===(s=e.sale_manager)||void 0===s?void 0:s.name)||"N/A"}),(0,y.jsx)("td",{children:(null===(t=z.find((a=>a.id===e.sales_executive_id)))||void 0===t?void 0:t.name)||e.sales_executive_id}),(0,y.jsx)("td",{children:e.source_type}),(0,y.jsx)("td",{children:ne(e.status)}),(0,y.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,y.jsx)("td",{children:se(e)})]},e.id)})):(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"11",className:"text-center",children:"No sales records available."})})})]}),(0,y.jsxs)(i.A,{className:"justify-content-center mt-4",children:[(0,y.jsx)(i.A.First,{onClick:()=>Y(1),disabled:1===w}),(0,y.jsx)(i.A.Prev,{onClick:()=>Y(w-1),disabled:1===w}),(()=>{const e=[],a=Math.max(1,w-Math.floor(2.5)),n=Math.min(F,a+5-1);for(let s=a;s<=n;s++)e.push((0,y.jsx)(i.A.Item,{active:s===w,onClick:()=>Y(s),children:s},s));return e})(),(0,y.jsx)(i.A.Next,{onClick:()=>Y(w+1),disabled:w===F}),(0,y.jsx)(i.A.Last,{onClick:()=>Y(F),disabled:w===F})]}),(0,y.jsxs)(u.A,{show:M,onHide:()=>R(!1),children:[(0,y.jsx)(u.A.Header,{closeButton:!0,children:(0,y.jsx)(u.A.Title,{children:"Confirm Deletion"})}),(0,y.jsx)(u.A.Body,{children:"Are you sure you want to delete this sale record?"}),(0,y.jsxs)(u.A.Footer,{children:[(0,y.jsx)(r.A,{variant:"secondary",onClick:()=>R(!1),children:"Cancel"}),(0,y.jsx)(r.A,{variant:"danger",onClick:()=>{X(G.id),R(!1)},children:"Delete"})]})]}),(0,y.jsxs)(u.A,{show:q,onHide:()=>E(!1),size:"lg",children:[(0,y.jsx)(u.A.Header,{closeButton:!0,children:(0,y.jsx)(u.A.Title,{children:G?"Edit Sale":"Add New Sale"})}),(0,y.jsx)(u.A.Body,{children:G?(0,y.jsx)(f(),{saleData:G,onCancel:()=>E(!1),onSubmit:ae}):(0,y.jsx)(g,{onSubmit:ae,onCancel:()=>E(!1)})})]})]})}},4063:(e,a,n)=>{"use strict";n.d(a,{A:()=>o});var s=n(8139),t=n.n(s),r=n(5043),i=n(7852),l=n(579);const c=r.forwardRef(((e,a)=>{let{bsPrefix:n,bg:s="primary",pill:r=!1,text:c,className:o,as:d="span",...m}=e;const u=(0,i.oU)(n,"badge");return(0,l.jsx)(d,{ref:a,...m,className:t()(o,u,r&&"rounded-pill",c&&`text-${c}`,s&&`bg-${s}`)})}));c.displayName="Badge";const o=c},8861:(e,a,n)=>{"use strict";n.d(a,{A:()=>f});var s=n(8139),t=n.n(s),r=n(5043),i=n(7852),l=(n(2667),n(8232),n(1456));n(6723),n(1342);n(4723);new WeakMap;var c=n(4140),o=n(579);const d=["onKeyDown"];const m=r.forwardRef(((e,a)=>{let{onKeyDown:n}=e,s=function(e,a){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,d);const[t]=(0,c.Am)(Object.assign({tagName:"a"},s)),r=(0,l.A)((e=>{t.onKeyDown(e),null==n||n(e)}));return(i=s.href)&&"#"!==i.trim()&&"button"!==s.role?(0,o.jsx)("a",Object.assign({ref:a},s,{onKeyDown:n})):(0,o.jsx)("a",Object.assign({ref:a},s,t,{onKeyDown:r}));var i}));m.displayName="Anchor";const u=m,h=r.forwardRef(((e,a)=>{let{active:n=!1,disabled:s=!1,className:r,style:i,activeLabel:l="(current)",children:c,linkStyle:d,linkClassName:m,as:h=u,..._}=e;const p=n||s?"span":h;return(0,o.jsx)("li",{ref:a,style:i,className:t()(r,"page-item",{active:n,disabled:s}),children:(0,o.jsxs)(p,{className:t()("page-link",m),style:d,..._,children:[c,n&&l&&(0,o.jsx)("span",{className:"visually-hidden",children:l})]})})}));h.displayName="PageItem";const _=h;function p(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const s=r.forwardRef(((e,s)=>{let{children:t,...r}=e;return(0,o.jsxs)(h,{...r,ref:s,children:[(0,o.jsx)("span",{"aria-hidden":"true",children:t||a}),(0,o.jsx)("span",{className:"visually-hidden",children:n})]})}));return s.displayName=e,s}const x=p("First","\xab"),b=p("Prev","\u2039","Previous"),j=p("Ellipsis","\u2026","More"),y=p("Next","\u203a"),g=p("Last","\xbb"),v=r.forwardRef(((e,a)=>{let{bsPrefix:n,className:s,size:r,...l}=e;const c=(0,i.oU)(n,"pagination");return(0,o.jsx)("ul",{ref:a,...l,className:t()(s,c,r&&`${c}-${r}`)})}));v.displayName="Pagination";const f=Object.assign(v,{First:x,Prev:b,Ellipsis:j,Item:_,Next:y,Last:g})}}]);
//# sourceMappingURL=804.16ce0283.chunk.js.map