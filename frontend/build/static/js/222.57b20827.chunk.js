"use strict";(self.webpackChunkSales_tracking_app=self.webpackChunkSales_tracking_app||[]).push([[222],{5222:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var r=a(5043),l=a(3519),t=a(1072),n=a(8602),i=a(8258),o=a(3814),d=a(4282),c=a(7417);const f=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);var m=a(3216),u=a(5016),x=a(8816);const g=()=>{const{state:e,login:s,logout:a}=(0,u.A)(),{role:l,isAuthenticated:t,loading:n,error:i}=e,o=(0,m.Zp)(),[d,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{try{if(await x.A.isLoggedIn(o)){const e=l||JSON.parse(localStorage.getItem("userRole"));if(null!==e&&void 0!==e&&e.id){const s=3===e.id?"/manage-users":"/sales";o(s)}}else o("/login")}catch(i){console.error("Initialization error:",i),o("/login")}finally{c(!0)}})()}),[o,l]),(0,r.useEffect)((()=>{if(d)if(t&&null!==l&&void 0!==l&&l.id){const e=3===l.id?"/manage-users":"/sales";o(e)}else o("/login")}),[t,l,o,d]),{role:l,isLoading:n,error:i,handleLogin:s,handleLogout:a}};var N=a(579);const h=function(e){let{showToast:s}=e;const[a,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[h,v]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),{handleLogin:b}=g();return(0,N.jsx)(l.A,{className:"d-flex align-items-center justify-content-center vh-100",children:(0,N.jsx)(t.A,{className:"justify-content-center",children:(0,N.jsx)(n.A,{children:(0,N.jsx)(i.A,{className:"p-4 shadow-sm",children:(0,N.jsxs)(i.A.Body,{children:[(0,N.jsx)("h2",{className:"text-center mb-4",children:"Login"}),(0,N.jsxs)(o.A,{onSubmit:async e=>{if(e.preventDefault(),y(null),!a||!u){const e="Please fill in all fields";return y(e),void s("warning",e,"Missing Fields")}if(!f(a)){const e="Please enter a valid email address";return y(e),void s("warning",e,"Invalid Email")}v(!0);try{await b({email:a,password:u}),s("success","Login successful!","Success")}catch(p){console.error("Login error:",p);const a=(null===p||void 0===p?void 0:p.message)||"Login failed. Please try again.";y(a),s("danger",a,"Error")}finally{v(!1)}},children:[(0,N.jsxs)(o.A.Group,{controlId:"formEmail",className:"mb-3",children:[(0,N.jsx)(o.A.Label,{children:"Email address"}),(0,N.jsx)(o.A.Control,{type:"email",placeholder:"Enter email",value:a,onChange:e=>m(e.target.value),isInvalid:!!p&&!f(a),required:!0}),(0,N.jsx)(o.A.Control.Feedback,{type:"invalid",children:p&&!f(a)?p:"Please enter a valid email."})]}),(0,N.jsxs)(o.A.Group,{controlId:"formPassword",className:"mb-3",children:[(0,N.jsx)(o.A.Label,{children:"Password"}),(0,N.jsx)(o.A.Control,{type:"password",placeholder:"Password",value:u,onChange:e=>x(e.target.value),isInvalid:!!p&&""===u,required:!0}),(0,N.jsx)(o.A.Control.Feedback,{type:"invalid",children:p&&""===u?p:"Password is required."})]}),p&&(0,N.jsx)("div",{className:"text-danger text-center mb-3",children:p}),(0,N.jsx)("div",{className:"d-grid",children:(0,N.jsx)(d.A,{variant:"primary",size:"lg",type:"submit",disabled:h,children:h?(0,N.jsx)(c.A,{animation:"border",size:"sm"}):"Login"})})]})]})})})})})}},8258:(e,s,a)=>{a.d(s,{A:()=>U});var r=a(8139),l=a.n(r),t=a(5043),n=a(7852),i=a(579);const o=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="div",...o}=e;return r=(0,n.oU)(r,"card-body"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));o.displayName="CardBody";const d=o,c=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="div",...o}=e;return r=(0,n.oU)(r,"card-footer"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));c.displayName="CardFooter";const f=c,m=t.createContext(null);m.displayName="CardHeaderContext";const u=m,x=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,as:o="div",...d}=e;const c=(0,n.oU)(a,"card-header"),f=(0,t.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,i.jsx)(u.Provider,{value:f,children:(0,i.jsx)(o,{ref:s,...d,className:l()(r,c)})})}));x.displayName="CardHeader";const g=x,N=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,variant:t,as:o="img",...d}=e;const c=(0,n.oU)(a,"card-img");return(0,i.jsx)(o,{ref:s,className:l()(t?`${c}-${t}`:c,r),...d})}));N.displayName="CardImg";const h=N,v=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="div",...o}=e;return r=(0,n.oU)(r,"card-img-overlay"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));v.displayName="CardImgOverlay";const p=v,y=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="a",...o}=e;return r=(0,n.oU)(r,"card-link"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));y.displayName="CardLink";const b=y;var j=a(4488);const w=(0,j.A)("h6"),A=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t=w,...o}=e;return r=(0,n.oU)(r,"card-subtitle"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));A.displayName="CardSubtitle";const C=A,P=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="p",...o}=e;return r=(0,n.oU)(r,"card-text"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));P.displayName="CardText";const L=P,R=(0,j.A)("h5"),$=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t=R,...o}=e;return r=(0,n.oU)(r,"card-title"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...o})}));$.displayName="CardTitle";const S=$,I=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,bg:t,text:o,border:c,body:f=!1,children:m,as:u="div",...x}=e;const g=(0,n.oU)(a,"card");return(0,i.jsx)(u,{ref:s,...x,className:l()(r,g,t&&`bg-${t}`,o&&`text-${o}`,c&&`border-${c}`),children:f?(0,i.jsx)(d,{children:m}):m})}));I.displayName="Card";const U=Object.assign(I,{Img:h,Title:S,Subtitle:C,Body:d,Link:b,Text:L,Header:g,Footer:f,ImgOverlay:p})},3519:(e,s,a)=>{a.d(s,{A:()=>d});var r=a(8139),l=a.n(r),t=a(5043),n=a(7852),i=a(579);const o=t.forwardRef(((e,s)=>{let{bsPrefix:a,fluid:r=!1,as:t="div",className:o,...d}=e;const c=(0,n.oU)(a,"container"),f="string"===typeof r?`-${r}`:"-fluid";return(0,i.jsx)(t,{ref:s,...d,className:l()(o,r?`${c}${f}`:c)})}));o.displayName="Container";const d=o},1072:(e,s,a)=>{a.d(s,{A:()=>d});var r=a(8139),l=a.n(r),t=a(5043),n=a(7852),i=a(579);const o=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,as:t="div",...o}=e;const d=(0,n.oU)(a,"row"),c=(0,n.gy)(),f=(0,n.Jm)(),m=`${d}-cols`,u=[];return c.forEach((e=>{const s=o[e];let a;delete o[e],null!=s&&"object"===typeof s?({cols:a}=s):a=s;const r=e!==f?`-${e}`:"";null!=a&&u.push(`${m}${r}-${a}`)})),(0,i.jsx)(t,{ref:s,...o,className:l()(r,d,...u)})}));o.displayName="Row";const d=o}}]);
//# sourceMappingURL=222.57b20827.chunk.js.map