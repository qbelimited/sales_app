"use strict";(self.webpackChunkSales_tracking_app=self.webpackChunkSales_tracking_app||[]).push([[222],{5222:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var r=s(5043),l=s(3519),t=s(1072),i=s(8602),n=s(8258),d=s(3814),o=s(4282),c=s(7417);const f=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);var m=s(3216),u=s(5016),x=s(8816);const g=()=>{const{state:e,login:a,logout:s}=(0,u.A)(),{role:l,isAuthenticated:t,loading:i,error:n}=e,d=(0,m.Zp)(),[o,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{try{if(await x.A.isLoggedIn()){let e=l;if(e||(e=JSON.parse(localStorage.getItem("userRole"))),e&&e.id){const a=3===e.id?"/manage-users":"/sales";d(a)}}else d("/login")}catch{d("/login")}finally{c(!0)}})()}),[d,l]),(0,r.useEffect)((()=>{if(o)if(t&&null!==l&&void 0!==l&&l.id){const e=3===l.id?"/manage-users":"/sales";d(e)}else d("/login")}),[t,l,d,o]),{role:l,isLoading:i,error:n,handleLogin:a,handleLogout:s}};var N=s(579);const h=function(e){let{showToast:a}=e;const[s,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),{handleLogin:b}=g();return(0,N.jsx)(l.A,{className:"d-flex align-items-center justify-content-center vh-100",children:(0,N.jsx)(t.A,{className:"justify-content-center",children:(0,N.jsx)(i.A,{children:(0,N.jsx)(n.A,{className:"p-4 shadow-sm",children:(0,N.jsxs)(n.A.Body,{children:[(0,N.jsx)("h2",{className:"text-center mb-4",children:"Login"}),(0,N.jsxs)(d.A,{onSubmit:async e=>{if(e.preventDefault(),y(null),!s||!u)return y("Please fill in all fields"),void a("warning","Please fill in all fields","Missing Fields");if(!f(s))return y("Please enter a valid email address"),void a("warning","Please enter a valid email address","Invalid Email");p(!0);try{await b({email:s,password:u}),a("success","Login successful!","Success")}catch(v){console.error("Login error:",v),y(v.message||"Login failed. Please try again."),a("danger",v.message||"Login failed!","Error")}finally{p(!1)}},children:[(0,N.jsxs)(d.A.Group,{controlId:"formEmail",className:"mb-3",children:[(0,N.jsx)(d.A.Label,{children:"Email address"}),(0,N.jsx)(d.A.Control,{type:"email",placeholder:"Enter email",value:s,onChange:e=>m(e.target.value),isInvalid:!!v&&!f(s),required:!0}),(0,N.jsx)(d.A.Control.Feedback,{type:"invalid",children:v&&!f(s)?v:"Please enter a valid email."})]}),(0,N.jsxs)(d.A.Group,{controlId:"formPassword",className:"mb-3",children:[(0,N.jsx)(d.A.Label,{children:"Password"}),(0,N.jsx)(d.A.Control,{type:"password",placeholder:"Password",value:u,onChange:e=>x(e.target.value),isInvalid:!!v&&f(s),required:!0}),(0,N.jsx)(d.A.Control.Feedback,{type:"invalid",children:v&&f(s)?v:"Incorrect password."})]}),v&&(0,N.jsx)("div",{className:"text-danger text-center mb-3",children:v}),(0,N.jsx)("div",{className:"d-grid",children:(0,N.jsx)(o.A,{variant:"primary",size:"lg",type:"submit",disabled:h,children:h?(0,N.jsx)(c.A,{animation:"border",size:"sm"}):"Login"})})]})]})})})})})}},8258:(e,a,s)=>{s.d(a,{A:()=>U});var r=s(8139),l=s.n(r),t=s(5043),i=s(7852),n=s(579);const d=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t="div",...d}=e;return r=(0,i.oU)(r,"card-body"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));d.displayName="CardBody";const o=d,c=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t="div",...d}=e;return r=(0,i.oU)(r,"card-footer"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));c.displayName="CardFooter";const f=c,m=t.createContext(null);m.displayName="CardHeaderContext";const u=m,x=t.forwardRef(((e,a)=>{let{bsPrefix:s,className:r,as:d="div",...o}=e;const c=(0,i.oU)(s,"card-header"),f=(0,t.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,n.jsx)(u.Provider,{value:f,children:(0,n.jsx)(d,{ref:a,...o,className:l()(r,c)})})}));x.displayName="CardHeader";const g=x,N=t.forwardRef(((e,a)=>{let{bsPrefix:s,className:r,variant:t,as:d="img",...o}=e;const c=(0,i.oU)(s,"card-img");return(0,n.jsx)(d,{ref:a,className:l()(t?`${c}-${t}`:c,r),...o})}));N.displayName="CardImg";const h=N,p=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t="div",...d}=e;return r=(0,i.oU)(r,"card-img-overlay"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));p.displayName="CardImgOverlay";const v=p,y=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t="a",...d}=e;return r=(0,i.oU)(r,"card-link"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));y.displayName="CardLink";const b=y;var j=s(4488);const w=(0,j.A)("h6"),A=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t=w,...d}=e;return r=(0,i.oU)(r,"card-subtitle"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));A.displayName="CardSubtitle";const P=A,C=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t="p",...d}=e;return r=(0,i.oU)(r,"card-text"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));C.displayName="CardText";const L=C,R=(0,j.A)("h5"),$=t.forwardRef(((e,a)=>{let{className:s,bsPrefix:r,as:t=R,...d}=e;return r=(0,i.oU)(r,"card-title"),(0,n.jsx)(t,{ref:a,className:l()(s,r),...d})}));$.displayName="CardTitle";const S=$,I=t.forwardRef(((e,a)=>{let{bsPrefix:s,className:r,bg:t,text:d,border:c,body:f=!1,children:m,as:u="div",...x}=e;const g=(0,i.oU)(s,"card");return(0,n.jsx)(u,{ref:a,...x,className:l()(r,g,t&&`bg-${t}`,d&&`text-${d}`,c&&`border-${c}`),children:f?(0,n.jsx)(o,{children:m}):m})}));I.displayName="Card";const U=Object.assign(I,{Img:h,Title:S,Subtitle:P,Body:o,Link:b,Text:L,Header:g,Footer:f,ImgOverlay:v})},3519:(e,a,s)=>{s.d(a,{A:()=>o});var r=s(8139),l=s.n(r),t=s(5043),i=s(7852),n=s(579);const d=t.forwardRef(((e,a)=>{let{bsPrefix:s,fluid:r=!1,as:t="div",className:d,...o}=e;const c=(0,i.oU)(s,"container"),f="string"===typeof r?`-${r}`:"-fluid";return(0,n.jsx)(t,{ref:a,...o,className:l()(d,r?`${c}${f}`:c)})}));d.displayName="Container";const o=d},1072:(e,a,s)=>{s.d(a,{A:()=>o});var r=s(8139),l=s.n(r),t=s(5043),i=s(7852),n=s(579);const d=t.forwardRef(((e,a)=>{let{bsPrefix:s,className:r,as:t="div",...d}=e;const o=(0,i.oU)(s,"row"),c=(0,i.gy)(),f=(0,i.Jm)(),m=`${o}-cols`,u=[];return c.forEach((e=>{const a=d[e];let s;delete d[e],null!=a&&"object"===typeof a?({cols:s}=a):s=a;const r=e!==f?`-${e}`:"";null!=s&&u.push(`${m}${r}-${s}`)})),(0,n.jsx)(t,{ref:a,...d,className:l()(r,o,...u)})}));d.displayName="Row";const o=d}}]);
//# sourceMappingURL=222.8a362806.chunk.js.map