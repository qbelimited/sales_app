"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[222],{5222:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var r=a(5043),l=a(3519),t=a(1072),n=a(8602),i=a(8258),d=a(3814),o=a(4282),c=a(7417);const f=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);var m=a(3216),u=a(5016),x=a(8816);const g=()=>{const{state:e,login:s,logout:a}=(0,u.A)(),{role:l,isAuthenticated:t,loading:n,error:i}=e,d=(0,m.Zp)(),[o,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{try{if(await x.A.isLoggedIn()){let e=l;if(e||(e=JSON.parse(localStorage.getItem("userRole"))),e&&e.id){const s=3===e.id?"/manage-users":"/sales";d(s)}}else d("/login")}catch{d("/login")}finally{c(!0)}})()}),[d,l]),(0,r.useEffect)((()=>{if(o)if(t&&null!==l&&void 0!==l&&l.id){const e=3===l.id?"/manage-users":"/sales";d(e)}else d("/login")}),[t,l,d,o]),{role:l,isLoading:n,error:i,handleLogin:s,handleLogout:a}};var N=a(579);const h=function(e){let{showToast:s}=e;const[a,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[h,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),{handleLogin:j}=g();return(0,N.jsx)(l.A,{className:"d-flex align-items-center justify-content-center vh-100",children:(0,N.jsx)(t.A,{className:"justify-content-center",children:(0,N.jsx)(n.A,{children:(0,N.jsx)(i.A,{className:"p-4 shadow-sm",children:(0,N.jsxs)(i.A.Body,{children:[(0,N.jsx)("h2",{className:"text-center mb-4",children:"Login"}),(0,N.jsxs)(d.A,{onSubmit:async e=>{if(e.preventDefault(),b(null),!a||!u)return b("Please fill in all fields"),void s("warning","Please fill in all fields","Missing Fields");if(!f(a))return b("Please enter a valid email address"),void s("warning","Please enter a valid email address","Invalid Email");v(!0);try{await j({email:a,password:u}),s("success","Login successful!","Success")}catch(y){console.error("Login error:",y),b(y.message||"Login failed. Please try again."),s("danger",y.message||"Login failed!","Error")}finally{v(!1)}},children:[(0,N.jsxs)(d.A.Group,{controlId:"formEmail",className:"mb-3",children:[(0,N.jsx)(d.A.Label,{children:"Email address"}),(0,N.jsx)(d.A.Control,{type:"email",placeholder:"Enter email",value:a,onChange:e=>m(e.target.value),isInvalid:!!y&&!f(a),required:!0}),(0,N.jsx)(d.A.Control.Feedback,{type:"invalid",children:y&&!f(a)?y:"Please enter a valid email."})]}),(0,N.jsxs)(d.A.Group,{controlId:"formPassword",className:"mb-3",children:[(0,N.jsx)(d.A.Label,{children:"Password"}),(0,N.jsx)(d.A.Control,{type:"password",placeholder:"Password",value:u,onChange:e=>x(e.target.value),isInvalid:!!y&&f(a),required:!0}),(0,N.jsx)(d.A.Control.Feedback,{type:"invalid",children:y&&f(a)?y:"Incorrect password."})]}),y&&(0,N.jsx)("div",{className:"text-danger text-center mb-3",children:y}),(0,N.jsx)("div",{className:"d-grid",children:(0,N.jsx)(o.A,{variant:"primary",size:"lg",type:"submit",disabled:h,children:h?(0,N.jsx)(c.A,{animation:"border",size:"sm"}):"Login"})})]})]})})})})})}},8258:(e,s,a)=>{a.d(s,{A:()=>S});var r=a(8139),l=a.n(r),t=a(5043),n=a(7852),i=a(579);const d=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="div",...d}=e;return r=(0,n.oU)(r,"card-body"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));d.displayName="CardBody";const o=d,c=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="div",...d}=e;return r=(0,n.oU)(r,"card-footer"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));c.displayName="CardFooter";const f=c,m=t.createContext(null);m.displayName="CardHeaderContext";const u=m,x=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,as:d="div",...o}=e;const c=(0,n.oU)(a,"card-header"),f=(0,t.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,i.jsx)(u.Provider,{value:f,children:(0,i.jsx)(d,{ref:s,...o,className:l()(r,c)})})}));x.displayName="CardHeader";const g=x,N=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,variant:t,as:d="img",...o}=e;const c=(0,n.oU)(a,"card-img");return(0,i.jsx)(d,{ref:s,className:l()(t?`${c}-${t}`:c,r),...o})}));N.displayName="CardImg";const h=N,v=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="div",...d}=e;return r=(0,n.oU)(r,"card-img-overlay"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));v.displayName="CardImgOverlay";const y=v,b=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="a",...d}=e;return r=(0,n.oU)(r,"card-link"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));b.displayName="CardLink";const j=b;var p=a(4488);const w=(0,p.A)("h6"),A=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t=w,...d}=e;return r=(0,n.oU)(r,"card-subtitle"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));A.displayName="CardSubtitle";const P=A,C=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t="p",...d}=e;return r=(0,n.oU)(r,"card-text"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));C.displayName="CardText";const L=C,R=(0,p.A)("h5"),$=t.forwardRef(((e,s)=>{let{className:a,bsPrefix:r,as:t=R,...d}=e;return r=(0,n.oU)(r,"card-title"),(0,i.jsx)(t,{ref:s,className:l()(a,r),...d})}));$.displayName="CardTitle";const I=$,U=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,bg:t,text:d,border:c,body:f=!1,children:m,as:u="div",...x}=e;const g=(0,n.oU)(a,"card");return(0,i.jsx)(u,{ref:s,...x,className:l()(r,g,t&&`bg-${t}`,d&&`text-${d}`,c&&`border-${c}`),children:f?(0,i.jsx)(o,{children:m}):m})}));U.displayName="Card";const S=Object.assign(U,{Img:h,Title:I,Subtitle:P,Body:o,Link:j,Text:L,Header:g,Footer:f,ImgOverlay:y})},3519:(e,s,a)=>{a.d(s,{A:()=>o});var r=a(8139),l=a.n(r),t=a(5043),n=a(7852),i=a(579);const d=t.forwardRef(((e,s)=>{let{bsPrefix:a,fluid:r=!1,as:t="div",className:d,...o}=e;const c=(0,n.oU)(a,"container"),f="string"===typeof r?`-${r}`:"-fluid";return(0,i.jsx)(t,{ref:s,...o,className:l()(d,r?`${c}${f}`:c)})}));d.displayName="Container";const o=d},1072:(e,s,a)=>{a.d(s,{A:()=>o});var r=a(8139),l=a.n(r),t=a(5043),n=a(7852),i=a(579);const d=t.forwardRef(((e,s)=>{let{bsPrefix:a,className:r,as:t="div",...d}=e;const o=(0,n.oU)(a,"row"),c=(0,n.gy)(),f=(0,n.Jm)(),m=`${o}-cols`,u=[];return c.forEach((e=>{const s=d[e];let a;delete d[e],null!=s&&"object"===typeof s?({cols:a}=s):a=s;const r=e!==f?`-${e}`:"";null!=a&&u.push(`${m}${r}-${a}`)})),(0,i.jsx)(t,{ref:s,...d,className:l()(r,o,...u)})}));d.displayName="Row";const o=d}}]);
//# sourceMappingURL=222.1e673727.chunk.js.map